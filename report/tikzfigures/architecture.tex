\begin{figure*}[ht]
  \centering
  \begin{tikzpicture}[scale=0.9, transform shape]
    \node[external] (github) {GitHub Events API};
    \node[build, right=1.5 of github] (producer) {Java Producer};
    \draw[flow] (github) -> (producer) node [midway, fill=white, above=0.1] {HTTP};
    \node[internal, right=0.75 of producer] (kafka) {Kafka Broker};
    \draw[flow] (producer) -> (kafka);
    \node[internal, above=0.75 of kafka] (kafkaui) {Kafka UI};
    \draw[dashed, thick] (kafka) -> (kafkaui);
    \node[build, below=of kafka, xshift=-80] (processor) {Flink Processor};
    \node[internal, right=of processor] (jobmanager) {Job Manager};
    \draw[dashed, thick] (processor) -> (jobmanager);
    \node[internal, below=0.5 of jobmanager] (taskmanager) {Task Manager};
    \draw[dashed, thick] (jobmanager) -> (taskmanager);
    \node[internal, left=0.5 of taskmanager] (zookeeper) {ZooKeeper};
    \draw[dashed, thick] (jobmanager) -> (zookeeper);
    \begin{scope}[on background layer]
      \node[draw, dashed, fit=(processor)(jobmanager)(taskmanager), inner sep=7] (flink) {};
      \node[below=0.1 of flink] (flinklabel) {Flink Cluster};
    \end{scope}
    \draw[flow] ($(kafka.south)-(0.25,0)$) -> ($(kafka |- flink.north)-(0.25,0)$);
    \draw[flow] ($(kafka |- flink.north)+(0.25,0)$) -> ($(kafka.south)+(0.25,0)$);
    \node[build, above=0.75 of producer] (dummy) {Dummy API Server};
    \draw[flow, dashed] (dummy) -> (producer);
    \node[build, right=0.75 of kafkaui] (frontend) {Java Frontend Server};
    \draw[flow] (kafka) -| ($(frontend.south)-(0.75,0)$);
    \node[internal, right=of jobmanager] (postgres) {PostgreSQL};
    \node[internal, below=0.5 of postgres] (pgadmin) {pgAdmin};
    \draw[dashed, thick] (postgres) -- (pgadmin);
    \draw[flow] ($(postgres -| flink.east)$) -> ($(postgres.west)$);
    \draw[flow] ($(postgres.north)$) -> ($(postgres |- frontend.south)$);
    \node[mixed, above=of frontend] (browser) {Browser Showing Web UI};
    \draw[flow] ($(frontend.north)-(0.2,0)$) -> ($(browser.south)-(0.2,0)$) node [midway, fill=white, above left=0.1] {HTTP};
    \draw[biflow] ($(frontend.north)+(0.2,0)$) -> ($(browser.south)+(0.2,0)$) node [midway, fill=white, above right=0.1] {WebSocket};
    \begin{scope}[on background layer]
      \node[draw, dashed, fit=(flink)(flinklabel)(producer)(kafkaui)(frontend)(dummy)(postgres), inner sep=10] (docker) {};
      \node[below=0.1 of docker] (dockerlabel) {Docker Compose Application};
    \end{scope}
  \end{tikzpicture}
  \caption{Implemented application architecture. Blue indicates parts of the architecture controlled by the project, while the brown indicates external components. Darker blue represents components implemented as part of the project, while light blue components represent the use of existing software that has merely been configured.}
  \label{fig:arch}
\end{figure*}
