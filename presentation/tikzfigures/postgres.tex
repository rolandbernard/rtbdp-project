\begin{figure}
  \centering
  \begin{tikzpicture}[scale=0.5, transform shape, every path/.style={opacity=0.25}]
    \node[external] (github) {GitHub Events API};
    \node[build, right=1.5 of github] (producer) {Kafka Producer};
    \draw[flow] (github) -> (producer) node [midway, fill=white, above=0.1] {HTTP};
    \node[internal, above=of producer] (kafka) {Kafka Broker};
    \draw[flow] (producer) -> (kafka);
    \node[internal, dashed, above=0.6 of kafka, xshift=35] (kafkaui) {Kafka UI};
    \draw[dashed, thick] (kafka) -> (kafkaui);
    \node[build, above=0.6 of kafka, xshift=130] (processor) {Flink Processor};
    \node[internal, below=0.5 of processor] (jobmanager) {Job Manager};
    \draw[dashed, thick] (processor) -> (jobmanager);
    \node[internal, right=of jobmanager] (taskmanager) {Task Manager};
    \draw[dashed, thick] (jobmanager) -> (taskmanager);
    \node[internal, above=0.5 of taskmanager] (zookeeper) {ZooKeeper};
    \draw[dashed, thick] (jobmanager) -> (zookeeper);
    \begin{scope}[on background layer]
      \node[draw, dashed, fit=(processor)(jobmanager)(taskmanager), inner sep=7] (flink) {};
      \node[below=0.1 of flink] (flinklabel) {Flink Cluster};
    \end{scope}
    \draw[flow] ($(kafka.east)-(0,0.25)$) -> ($(kafka -| flink.west)-(0,0.25)$);
    \draw[flow] ($(kafka -| flink.west)+(0,0.25)$) -> ($(kafka.east)+(0,0.25)$);
    \node[build, dashed, right=1.5 of producer] (dummy) {Dummy API Server};
    \draw[flow, dashed] (dummy) -> (producer);
    \node[build, above=2.575 of kafka] (frontend) {Frontend Server};
    \draw[flow] (kafka) -> ($(kafka |- frontend.south)$);
    \node[internal, above=of processor, opacity=1] (postgres) {PostgreSQL};
    \node[internal, dashed, right=0.5 of postgres, opacity=1] (pgadmin) {pgAdmin};
    \draw[dashed, thick, opacity=1] (postgres) -- (pgadmin);
    \draw[flow, opacity=1] ($(postgres |- flink.north)$) -> ($(postgres.south)$);
    \draw[flow, opacity=1] ($(postgres.west)$) -> ($(postgres -| frontend.east)$);
    \node[mixed, left=1.75 of frontend] (browser) {Browser Showing Web UI};
    \draw[flow] ($(frontend.west)+(0,0.2)$) -> ($(browser.east)+(0,0.2)$) node [midway, fill=white, above=0.1] {HTTP};
    \draw[biflow] ($(frontend.west)-(0,0.2)$) -> ($(browser.east)-(0,0.2)$) node [midway, fill=white, below=0.1] {WebSocket};
    \begin{scope}[on background layer]
      \node[draw, dashed, fit=(flink)(flinklabel)(producer)(kafkaui)(frontend)(dummy)(postgres), inner sep=10] (docker) {};
      \node[below=0.1 of docker] (dockerlabel) {Docker Compose Application};
    \end{scope}
  \end{tikzpicture}
\end{figure}
